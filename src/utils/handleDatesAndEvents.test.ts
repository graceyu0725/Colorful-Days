import { expect, test } from 'vitest';
import { getCellStartTime, splitDatesIntoWeeks } from './handleDatesAndEvents';

test('split month dates into weeks', () => {
  const actualCase1 = [
    new Date('2023-11-25T16:00:00.000Z'),
    new Date('2023-11-26T16:00:00.000Z'),
    new Date('2023-11-27T16:00:00.000Z'),
    new Date('2023-11-28T16:00:00.000Z'),
    new Date('2023-11-29T16:00:00.000Z'),
    new Date('2023-11-30T16:00:00.000Z'),
    new Date('2023-12-01T16:00:00.000Z'),
    new Date('2023-12-02T16:00:00.000Z'),
    new Date('2023-12-03T16:00:00.000Z'),
    new Date('2023-12-04T16:00:00.000Z'),
    new Date('2023-12-05T16:00:00.000Z'),
    new Date('2023-12-06T16:00:00.000Z'),
    new Date('2023-12-07T16:00:00.000Z'),
    new Date('2023-12-08T16:00:00.000Z'),
    new Date('2023-12-09T16:00:00.000Z'),
    new Date('2023-12-10T16:00:00.000Z'),
    new Date('2023-12-11T16:00:00.000Z'),
    new Date('2023-12-12T16:00:00.000Z'),
    new Date('2023-12-13T16:00:00.000Z'),
    new Date('2023-12-14T16:00:00.000Z'),
    new Date('2023-12-15T16:00:00.000Z'),
    new Date('2023-12-16T16:00:00.000Z'),
    new Date('2023-12-17T16:00:00.000Z'),
    new Date('2023-12-18T16:00:00.000Z'),
    new Date('2023-12-19T16:00:00.000Z'),
    new Date('2023-12-20T16:00:00.000Z'),
    new Date('2023-12-21T16:00:00.000Z'),
    new Date('2023-12-22T16:00:00.000Z'),
    new Date('2023-12-23T16:00:00.000Z'),
    new Date('2023-12-24T16:00:00.000Z'),
    new Date('2023-12-25T16:00:00.000Z'),
    new Date('2023-12-26T16:00:00.000Z'),
    new Date('2023-12-27T16:00:00.000Z'),
    new Date('2023-12-28T16:00:00.000Z'),
    new Date('2023-12-29T16:00:00.000Z'),
    new Date('2023-12-30T16:00:00.000Z'),
    new Date('2023-12-31T16:00:00.000Z'),
    new Date('2024-01-01T16:00:00.000Z'),
    new Date('2024-01-02T16:00:00.000Z'),
    new Date('2024-01-03T16:00:00.000Z'),
    new Date('2024-01-04T16:00:00.000Z'),
    new Date('2024-01-05T16:00:00.000Z'),
  ];
  const expectedResult1 = [
    [
      new Date('2023-11-25T16:00:00.000Z'),
      new Date('2023-11-26T16:00:00.000Z'),
      new Date('2023-11-27T16:00:00.000Z'),
      new Date('2023-11-28T16:00:00.000Z'),
      new Date('2023-11-29T16:00:00.000Z'),
      new Date('2023-11-30T16:00:00.000Z'),
      new Date('2023-12-01T16:00:00.000Z'),
    ],
    [
      new Date('2023-12-02T16:00:00.000Z'),
      new Date('2023-12-03T16:00:00.000Z'),
      new Date('2023-12-04T16:00:00.000Z'),
      new Date('2023-12-05T16:00:00.000Z'),
      new Date('2023-12-06T16:00:00.000Z'),
      new Date('2023-12-07T16:00:00.000Z'),
      new Date('2023-12-08T16:00:00.000Z'),
    ],
    [
      new Date('2023-12-09T16:00:00.000Z'),
      new Date('2023-12-10T16:00:00.000Z'),
      new Date('2023-12-11T16:00:00.000Z'),
      new Date('2023-12-12T16:00:00.000Z'),
      new Date('2023-12-13T16:00:00.000Z'),
      new Date('2023-12-14T16:00:00.000Z'),
      new Date('2023-12-15T16:00:00.000Z'),
    ],
    [
      new Date('2023-12-16T16:00:00.000Z'),
      new Date('2023-12-17T16:00:00.000Z'),
      new Date('2023-12-18T16:00:00.000Z'),
      new Date('2023-12-19T16:00:00.000Z'),
      new Date('2023-12-20T16:00:00.000Z'),
      new Date('2023-12-21T16:00:00.000Z'),
      new Date('2023-12-22T16:00:00.000Z'),
    ],
    [
      new Date('2023-12-23T16:00:00.000Z'),
      new Date('2023-12-24T16:00:00.000Z'),
      new Date('2023-12-25T16:00:00.000Z'),
      new Date('2023-12-26T16:00:00.000Z'),
      new Date('2023-12-27T16:00:00.000Z'),
      new Date('2023-12-28T16:00:00.000Z'),
      new Date('2023-12-29T16:00:00.000Z'),
    ],
    [
      new Date('2023-12-30T16:00:00.000Z'),
      new Date('2023-12-31T16:00:00.000Z'),
      new Date('2024-01-01T16:00:00.000Z'),
      new Date('2024-01-02T16:00:00.000Z'),
      new Date('2024-01-03T16:00:00.000Z'),
      new Date('2024-01-04T16:00:00.000Z'),
      new Date('2024-01-05T16:00:00.000Z'),
    ],
  ];

  const actualCase2 = [
    new Date('2024-01-27T16:00:00.000Z'),
    new Date('2024-01-28T16:00:00.000Z'),
    new Date('2024-01-29T16:00:00.000Z'),
    new Date('2024-01-30T16:00:00.000Z'),
    new Date('2024-01-31T16:00:00.000Z'),
    new Date('2024-02-01T16:00:00.000Z'),
    new Date('2024-02-02T16:00:00.000Z'),
    new Date('2024-02-03T16:00:00.000Z'),
    new Date('2024-02-04T16:00:00.000Z'),
    new Date('2024-02-05T16:00:00.000Z'),
    new Date('2024-02-06T16:00:00.000Z'),
    new Date('2024-02-07T16:00:00.000Z'),
    new Date('2024-02-08T16:00:00.000Z'),
    new Date('2024-02-09T16:00:00.000Z'),
    new Date('2024-02-10T16:00:00.000Z'),
    new Date('2024-02-11T16:00:00.000Z'),
    new Date('2024-02-12T16:00:00.000Z'),
    new Date('2024-02-13T16:00:00.000Z'),
    new Date('2024-02-14T16:00:00.000Z'),
    new Date('2024-02-15T16:00:00.000Z'),
    new Date('2024-02-16T16:00:00.000Z'),
    new Date('2024-02-17T16:00:00.000Z'),
    new Date('2024-02-18T16:00:00.000Z'),
    new Date('2024-02-19T16:00:00.000Z'),
    new Date('2024-02-20T16:00:00.000Z'),
    new Date('2024-02-21T16:00:00.000Z'),
    new Date('2024-02-22T16:00:00.000Z'),
    new Date('2024-02-23T16:00:00.000Z'),
    new Date('2024-02-24T16:00:00.000Z'),
    new Date('2024-02-25T16:00:00.000Z'),
    new Date('2024-02-26T16:00:00.000Z'),
    new Date('2024-02-27T16:00:00.000Z'),
    new Date('2024-02-28T16:00:00.000Z'),
    new Date('2024-02-29T16:00:00.000Z'),
    new Date('2024-03-01T16:00:00.000Z'),
  ];
  const expectedResult2 = [
    [
      new Date('2024-01-27T16:00:00.000Z'),
      new Date('2024-01-28T16:00:00.000Z'),
      new Date('2024-01-29T16:00:00.000Z'),
      new Date('2024-01-30T16:00:00.000Z'),
      new Date('2024-01-31T16:00:00.000Z'),
      new Date('2024-02-01T16:00:00.000Z'),
      new Date('2024-02-02T16:00:00.000Z'),
    ],
    [
      new Date('2024-02-03T16:00:00.000Z'),
      new Date('2024-02-04T16:00:00.000Z'),
      new Date('2024-02-05T16:00:00.000Z'),
      new Date('2024-02-06T16:00:00.000Z'),
      new Date('2024-02-07T16:00:00.000Z'),
      new Date('2024-02-08T16:00:00.000Z'),
      new Date('2024-02-09T16:00:00.000Z'),
    ],
    [
      new Date('2024-02-10T16:00:00.000Z'),
      new Date('2024-02-11T16:00:00.000Z'),
      new Date('2024-02-12T16:00:00.000Z'),
      new Date('2024-02-13T16:00:00.000Z'),
      new Date('2024-02-14T16:00:00.000Z'),
      new Date('2024-02-15T16:00:00.000Z'),
      new Date('2024-02-16T16:00:00.000Z'),
    ],
    [
      new Date('2024-02-17T16:00:00.000Z'),
      new Date('2024-02-18T16:00:00.000Z'),
      new Date('2024-02-19T16:00:00.000Z'),
      new Date('2024-02-20T16:00:00.000Z'),
      new Date('2024-02-21T16:00:00.000Z'),
      new Date('2024-02-22T16:00:00.000Z'),
      new Date('2024-02-23T16:00:00.000Z'),
    ],
    [
      new Date('2024-02-24T16:00:00.000Z'),
      new Date('2024-02-25T16:00:00.000Z'),
      new Date('2024-02-26T16:00:00.000Z'),
      new Date('2024-02-27T16:00:00.000Z'),
      new Date('2024-02-28T16:00:00.000Z'),
      new Date('2024-02-29T16:00:00.000Z'),
      new Date('2024-03-01T16:00:00.000Z'),
    ],
  ];

  expect(splitDatesIntoWeeks(actualCase1)).toStrictEqual(expectedResult1);
  expect(splitDatesIntoWeeks(actualCase2)).toStrictEqual(expectedResult2);
});

test('get cell start time', () => {
  const actualCase = {
    weekDates: [
      new Date('2023-11-26T16:00:00.000Z'),
      new Date('2023-11-27T16:00:00.000Z'),
      new Date('2023-11-28T16:00:00.000Z'),
      new Date('2023-11-29T16:00:00.000Z'),
      new Date('2023-11-30T16:00:00.000Z'),
      new Date('2023-12-01T16:00:00.000Z'),
      new Date('2023-12-02T16:00:00.000Z'),
    ],
    weekdayIndex: 0,
    timeIndex: 12,
    minute: 0,
  };
  const expectedResult = new Date('2023-11-27T04:00:00.000Z');
  const { weekDates, weekdayIndex, timeIndex, minute } = actualCase;

  expect(
    getCellStartTime(weekDates, weekdayIndex, timeIndex, minute),
  ).toStrictEqual(expectedResult);
});
